From 0817e3933cf8a4122cbba944ff5d32a8cdb78f9b Mon Sep 17 00:00:00 2001
From: Mick Sayson <mick@sayson.com>
Date: Fri, 12 Jun 2020 19:52:50 -0700
Subject: [PATCH] Fix default palette application on Qt 5.15.0

---
 src/app/Application.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/app/Application.cpp b/src/app/Application.cpp
index 7a54b89..143dc05 100644
--- a/src/app/Application.cpp
+++ b/src/app/Application.cpp
@@ -27,6 +27,7 @@
 #include <QNetworkReply>
 #include <QOperatingSystemVersion>
 #include <QSettings>
+#include <QStyle>
 #include <QSysInfo>
 #include <QTimer>
 #include <QTranslator>
@@ -187,6 +188,9 @@ Application::Application(int &argc, char **argv, bool haltOnParseError)
   // Enable system proxy auto-detection.
   QNetworkProxyFactory::setUseSystemConfiguration(true);
 
+  // Set default pallete. Pre Qt 5.15.0 this should be the same as the default
+  QApplication::setPalette(QApplication::style()->standardPalette());
+
   // Do platform-specific initialization.
 #if defined(Q_OS_MAC)
   // Register service on Mac.
